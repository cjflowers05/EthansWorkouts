<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>My 90-Day Fit</title>
  <style>
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
      background-color: #121212;
      color: #fff;
    }
    header {
      background-color: #1e1e1e;
      padding: 1rem;
      text-align: center;
      color: #ff3c3c;
      font-size: 1.5rem;
    }
    .container {
      padding: 1rem;
    }
    .card {
      background-color: #1f1f1f;
      border-radius: 12px;
      padding: 1rem;
      margin-bottom: 1rem;
      box-shadow: 0 2px 5px rgba(0,0,0,0.5);
    }
    .btn {
      background-color: #ff3c3c;
      border: none;
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1rem;
      margin-top: 0.5rem;
    }
    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 0.5rem;
      margin-top: 1rem;
    }
    .calendar-cell {
      background-color: #2b2b2b;
      padding: 0.75rem;
      text-align: center;
      border-radius: 6px;
      font-size: 0.9rem;
      cursor: pointer;
    }
    .calendar-cell:hover {
      outline: 2px solid #ff3c3c;
    }
  </style>
</head>
<body>
  <header>Welcome, CJ</header>
  <div class="container">
    <div class="card">
      <h2>Manage Workouts</h2>
      <button class="btn" onclick="addNewWorkout()">Add Custom Workout</button>
      <button class="btn" onclick="promptEditWorkout()">Edit Existing Workout</button>
      <select class="btn" id="viewWorkoutSelector" onchange="displayWorkoutDetails()">
        <option value="">View Custom Workout</option>
      </select>
      <ul id="customWorkoutDisplay"></ul>
    </div>
    <div class="card">
      <h2>90 Day Calendar</h2>
      <div class="calendar-grid" id="calendar90"></div>
    </div>
  </div>
  <script>
    const storedWorkouts = localStorage.getItem('customWorkouts');
    const fullWorkouts = storedWorkouts ? JSON.parse(storedWorkouts) : {
      'Full Body Strength': ['Goblet Squats', 'Dumbbell Press'],
      'Cardio + Core': ['Treadmill', 'Plank'],
      'Rest': ['Rest Day']
    };
    function saveWorkoutsToStorage() {
      localStorage.setItem('customWorkouts', JSON.stringify(fullWorkouts));
      updateWorkoutDropdown();
    }
    function editWorkoutPlan(name) {
      const newPlan = prompt(`Edit workout for ${name}:`, fullWorkouts[name]?.join(', '));
      if (newPlan !== null) {
        fullWorkouts[name] = newPlan.split(',').map(e => e.trim());
        saveWorkoutsToStorage();
      }
    }
    function promptEditWorkout() {
      const keys = Object.keys(fullWorkouts);
      const name = prompt(`Edit which workout?\n${keys.join(', ')}`);
      if (name && fullWorkouts[name]) editWorkoutPlan(name);
    }
    function addNewWorkout() {
      const name = prompt('Workout name?');
      const plan = prompt('Workout details (comma-separated)?');
      if (name && plan) {
        fullWorkouts[name] = plan.split(',').map(e => e.trim());
        saveWorkoutsToStorage();
      }
    }
    function updateWorkoutDropdown() {
      const select = document.getElementById('viewWorkoutSelector');
      select.innerHTML = '<option value="">View Custom Workout</option>';
      Object.keys(fullWorkouts).forEach(name => {
        const opt = document.createElement('option');
        opt.value = name;
        opt.textContent = name;
        select.appendChild(opt);
      });
    }
    function displayWorkoutDetails() {
      const name = document.getElementById('viewWorkoutSelector').value;
      const list = document.getElementById('customWorkoutDisplay');
      list.innerHTML = '';
      (fullWorkouts[name] || []).forEach(item => {
        const li = document.createElement('li');
        li.textContent = item;
        list.appendChild(li);
      });
    }
    updateWorkoutDropdown();
    const calendar = document.getElementById('calendar90');
    const startDate = new Date('2025-06-01');
    const today = new Date();
    const currentDay = Math.floor((today - startDate) / (1000 * 60 * 60 * 24)) + 1;
    const completedDays = JSON.parse(localStorage.getItem('completedDays') || '[]');
    for (let i = 1; i <= 90; i++) {
      const cell = document.createElement('div');
      cell.className = 'calendar-cell';
      cell.innerText = i;
      if (i === currentDay) {
        cell.style.border = '2px solid gold';
        setTimeout(() => cell.scrollIntoView({ behavior: 'smooth', block: 'center' }), 300);
      }
      if (completedDays.includes(i)) {
        cell.style.backgroundColor = '#3c8c3c';
      }
      cell.onclick = () => {
        const isComplete = completedDays.includes(i);
        const action = confirm(isComplete ? `Undo completion for Day ${i}?` : `Mark Day ${i} complete?`);
        if (action) {
          const idx = completedDays.indexOf(i);
          if (isComplete && idx !== -1) completedDays.splice(idx, 1);
          else if (!isComplete) completedDays.push(i);
          localStorage.setItem('completedDays', JSON.stringify(completedDays));
          cell.style.backgroundColor = completedDays.includes(i) ? '#3c8c3c' : '';
        }
      };
      calendar.appendChild(cell);
    }
  </script>
</body>
</html>
